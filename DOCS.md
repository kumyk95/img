# Документация системы обработки лиц

## Модели и методы нейронных сетей

### 1. Обнаружение лиц и ключевых точек
- **Каскады Хаара OpenCV**: Используются для быстрого первичного обнаружения лиц в качестве резервного метода.
- **Mediapipe Face Mesh**: Основной метод, обеспечивающий 468 высокоточных 3D-точек для точной локализации черт лица (наложение очков, маскирование глаз). Это решает запрос на "overpointing", предоставляя значительно больше, чем 120-144 точки.

### 2. Распознавание лиц
- **DeepFace (VGG-Face)**: Модель по умолчанию для верификации. VGG-Face — широко используемый стандарт для идентификации лиц.
- **Оценка (Score)**: Оценка сходства вычисляется на основе евклидова расстояния. 1.0 означает полную идентичность, 0.0 — полное отсутствие сходства.

### 3. Методы реконструкции
- **Inpainting (Метод 3 / Rec1)**: OpenCV `INPAINT_TELEA`. Восстанавливает отсутствующие пиксели на основе соседних областей с использованием метода Fast Marching.
- **CNN / Navier-Stokes (Метод 4)**: OpenCV `INPAINT_NS`. Использует уравнения гидродинамики для распространения интенсивностей изображения.
- **GAN (Метод 5)**: Симуляция GAN-подхода, сочетающая инпейнтинг со сглаживанием лица (Gaussian Blur) для имитации характерного "отфильтрованного" вида генеративных моделей.

## Почему реконструкция может снижать Скор
Инпейнтинг заполняет пробелы оценочной текстурой. Хотя для человеческого глаза это выглядит исправленным, алгоритм часто разрушает уникальные биометрические черты (мелкие детали вокруг глаз, текстуру кожи), на которые опираются алгоритмы распознавания. Поэтому восстановленное изображение может иметь Скор ниже, чем даже изображение с очками.

## Параметры сетей
- **Face Mesh**: Отрабатывает на исходном разрешении изображения. Мощность — 468 точек.
- **VGG-Face**: Входное разрешение 224x224 (внутреннее масштабирование выполняется библиотекой DeepFace).
- **Inpainting Mask**: Генерируется динамически на основе ключевых точек 70, 107, 336... (область глаз).
